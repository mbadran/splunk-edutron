"use client";

import { useRouter } from "next/navigation";
import { useAtom } from "jotai";
import { useEffect } from "react";
import HomePage from "@/components/HomePage";
import { APP_NAME } from "@/utils/constants";
import { setWorkingAtom } from "@/atoms/globalAtoms";

// Force static generation
export const dynamic = "force-static";

export default function Home() {
  const router = useRouter();
  const [, setWorking] = useAtom(setWorkingAtom);

  // Set page title
  useEffect(() => {
    document.title = `${APP_NAME} - Training Plans for Splunky Teams`;
  }, []);

  const handleBrowseCatalogs = () => {
    setWorking({ isWorking: true, message: "Loading catalogs..." });
    router.push("/catalogs");
  };

  const handleCreatePlan = () => {
    setWorking({ isWorking: true, message: "Loading planner..." });
    router.push("/planner");
  };

  const handleLoadPlan = () => {
    alert("Coming soon!");
  };

  return (
    <div id="homepage">
      <HomePage
        onBrowseCatalogs={handleBrowseCatalogs}
        onCreatePlan={handleCreatePlan}
        onLoadPlan={handleLoadPlan}
      />
    </div>
  );
}
